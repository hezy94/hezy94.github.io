---
title: h5aiâ€”â€”ä¸€ä¸ªç›®å½•åˆ—è¡¨ç¨‹åº
date: 2018-03-05 09:30:00
categories:
- h5ai
---
# h5aiâ€”â€”ä¸€ä¸ªç›®å½•åˆ—è¡¨ç¨‹åº

> åŸå…ˆçš„æƒ³æ³•æ˜¯æƒ³æ­å»ºä¸€ä¸ªåœ¨çº¿çš„è§†é¢‘æ’­æ”¾ç½‘ç«™ï¼Œåœ¨Debianä¸Šä½¿ç”¨**youtube-dl**ä¸‹è½½è§†é¢‘ï¼Œç„¶åé€šè¿‡**ffmpeg**è½¬ç ï¼Œæœ€ååœ¨[Jiangfan-Life...](http://35.194.234.238/wordpress/)ä¸Šå®ç°æ’­æ”¾çš„åŠŸèƒ½ã€‚


## ä¸€ã€ ä¸‹è½½h5aiå®‰è£…åŒ…
åœ°å€ï¼š[https://larsjung.de/h5ai/](https://larsjung.de/h5ai/)

## äºŒã€ ä¿®æ”¹é…ç½®æ–‡ä»¶
- è¿™é‡Œä½¿ç”¨äº†Nginxä½œä¸ºWebæœåŠ¡å™¨ï¼Œæ‰€ä»¥ä¿®æ”¹**nginx.conf**ã€‚åœ¨æ›´æ”¹ä¸»é¡µä¸€è¡Œ

`index index.html index.php`

ä¿®æ”¹ä¸º

`index index.html index.php /_h5ai/public/index.php;`

- åœ¨**php.ini**æ–‡ä»¶ä¸­ï¼Œæœç´¢ **scandir**ã€**exec**ã€**passthru**ï¼Œå°†å…¶ä»è¢«ç¦ç”¨çš„å‡½æ•°ä¸­åˆ é™¤ã€‚

- é‡å¯php/NginxæœåŠ¡

```
service php-fpm restart
service nginx reload
```
æ³¨ï¼šå½“å‰çš„é…ç½®æ˜¯åŸºäºğŸ‘‡çš„æ–‡ä»¶æ ‘ç»“æ„ä¿®æ”¹çš„é…ç½®æ–‡ä»¶ï¼Œå¦‚æœä¸æ˜¯è¿™ç§ç»“æ„ï¼Œå°±æœ‰å¦å¤–ä¸€ç§é…ç½®ã€‚
```
â”œâ”€â”€ _h5ai
â”‚   â”œâ”€â”€ CHANGELOG.md
â”‚   â”œâ”€â”€ private
â”‚   â”œâ”€â”€ public
â”‚   â””â”€â”€ README.md
â”œâ”€â”€ æ‚¨è¦æ˜¾ç¤ºçš„æ–‡ä»¶å¤¹
â”‚   â”œâ”€â”€ å­æ–‡ä»¶å¤¹1
â”‚   â”œâ”€â”€ æ–‡ä»¶1
â”‚   â””â”€â”€ æ–‡ä»¶2
â””â”€â”€ æ‚¨è¦æ˜¾ç¤ºçš„æ–‡ä»¶å¤¹
â”œâ”€â”€ æ–‡ä»¶1
â””â”€â”€ æ–‡ä»¶2
```
## ä¸‰ã€å®‰è£…ffmpeg

- åœ¨æ–‡ä»¶/etc/apt/sources.listä¸­æ·»åŠ 4ä¸ªè½¯ä»¶æº
```
deb http://www.deb-multimedia.org jessie main non-free
deb ftp://ftp.deb-multimedia.org jessie main non-free
deb http://www.deb-multimedia.org stable main non-free
deb ftp://ftp.deb-multimedia.org stable main non-free
```
ç„¶åè¾“å…¥å®‰è£…å‘½ä»¤
```
apt-get install ffmpeg
```
å®‰è£…å®Œæˆåï¼Œä¾¿å¯æ”¯æŒè§†é¢‘çš„è½¬ç ï¼Œä»¥è¾¾åˆ°æˆ‘ä»¬çš„è¦æ±‚

- å¦å¤–ffmpegä¸ä»…å¯ä»¥å®ç°è§†é¢‘è½¬æ ¼å¼ï¼Œè¿˜å¯ä»¥è¿è¡ŒéŸ³é¢‘å’Œè§†é¢‘å¤šç§æ ¼å¼çš„å½•å½±ã€æµåŠŸèƒ½ï¼ŒåŒ…å«äº†libavcodecâ€”â€”è¿™æ˜¯ä¸€ä¸ªç”¨äºå¤šä¸ªé¡¹ç›®ä¸­éŸ³é¢‘å’Œè§†é¢‘çš„è§£ç å™¨åº“ï¼Œä»¥åŠlibavformatâ€”â€”ä¸€ä¸ªéŸ³é¢‘ä¸è§†é¢‘æ ¼å¼è½¬æ¢åº“ã€‚

å¦é™„ï¼š
1. [ffmpegçš„å®˜ç½‘](https://www.ffmpeg.org/)
2. [ffmpegå‚æ•°ä¸­æ–‡è¯¦ç»†è§£é‡Š](http://blog.csdn.net/leixiaohua1020/article/details/12751349)

## å››ã€h5aiçš„å…¶ä»–åŠŸèƒ½
- å›¾ç‰‡/EXIF/è§†é¢‘/PDFçš„ç¼©ç•¥å›¾åŠŸèƒ½
  - å›¾ç‰‡ï¼šå°† _h5ai ä¸­ï¼Œprivate ä¸ public æ–‡ä»¶å¤¹ä¸­çš„ cache ç›®å½•è®¾ç½®æƒé™ä¸º 755ã€‚
  - EXIFï¼šé€šè¿‡ phpize å®‰è£… PHP çš„ exif æ¨¡å—å³å¯ã€‚
  - è§†é¢‘ç•¥ç¼©å›¾ï¼šå®‰è£… FFmpeg å³å¯ã€‚
  - PDF ç•¥ç¼©å›¾ï¼šå®‰è£… ImageMagickã€‚
- shell tar/shell zip/shell du
  - å»é™¤åœ¨ php.ini ä¸­è¢«ç¦ç”¨å‡½æ•° execä¸ passthru
- options.jsonä¸­çš„å…¶ä»–åŠŸèƒ½ã€‚ä¿®æ”¹_h5ai/private/confç›®å½•
    - æ‰“åŒ…ä¸‹è½½ï¼šæœç´¢**download**

    enabled ç”± false æ”¹ä¸º trueã€‚

    - æ–‡ä»¶ä¿¡æ¯åŠäºŒç»´ç ï¼šæœç´¢ **info**

    enabled ç”± false æ”¹ä¸º trueã€‚
    - é»˜è®¤ç®€ä½“ä¸­æ–‡ï¼šæœç´¢ **l10n**

    enabled ç”± false æ”¹ä¸º trueã€‚

    - æ–‡ä»¶åŠæ–‡ä»¶å¤¹å¤šé€‰ï¼šæœç´¢ **select**

    enabled ç”± false æ”¹ä¸º trueã€‚

## äº”ã€å‚è€ƒèµ„æ–™
- [h5aiå®˜ç½‘åœ°å€](https://larsjung.de/h5ai/)
- [h5aiå®‰è£…æ•™ç¨‹](https://www.htcp.net/3643.html)
- [ffmpegçš„å®˜ç½‘](https://www.ffmpeg.org/)
- [ffmpegå‚æ•°ä¸­æ–‡è¯¦ç»†è§£é‡Š](http://blog.csdn.net/leixiaohua1020/article/details/12751349)
